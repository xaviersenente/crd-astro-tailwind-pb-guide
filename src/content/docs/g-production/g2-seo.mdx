---
title: SEO
description: Optimisation pour les moteurs de recherche
---

## Balises meta de base

Dans chaque layout, ajouter les balises meta essentielles :

```astro
---
// src/layouts/Layout.astro
interface Props {
  title: string;
  description?: string;
  image?: string;
  noindex?: boolean;
}

const {
  title,
  description = 'Conservatoire de musique - École de musique pour tous niveaux',
  image = '/images/og-default.jpg',
  noindex = false,
} = Astro.props;

const canonicalURL = new URL(Astro.url.pathname, Astro.site);
const ogImage = new URL(image, Astro.site);
---

<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <meta name="generator" content={Astro.generator} />

    <!-- SEO de base -->
    <title>{title} | Conservatoire</title>
    <meta name="description" content={description} />
    <link rel="canonical" href={canonicalURL} />
    {noindex && <meta name="robots" content="noindex, nofollow" />}

    <!-- Open Graph (Facebook, LinkedIn) -->
    <meta property="og:type" content="website" />
    <meta property="og:url" content={canonicalURL} />
    <meta property="og:title" content={title} />
    <meta property="og:description" content={description} />
    <meta property="og:image" content={ogImage} />
    <meta property="og:locale" content="fr_FR" />
    <meta property="og:site_name" content="Conservatoire de Musique" />

    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:url" content={canonicalURL} />
    <meta name="twitter:title" content={title} />
    <meta name="twitter:description" content={description} />
    <meta name="twitter:image" content={ogImage} />

    <!-- Favicons -->
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png" />
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png" />
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png" />

    <slot name="head" />
  </head>
  <body>
    <slot />
  </body>
</html>
```

## Configuration Astro pour SEO

`astro.config.mjs` :

```js
export default defineConfig({
  site: "https://www.conservatoire-exemple.fr",
  integrations: [
    tailwind(),
    sitemap(), // Ajouter le plugin sitemap
  ],
});
```

Installer le plugin sitemap :

```bash
npx astro add sitemap
```

## Sitemap personnalisé

Le sitemap est généré automatiquement, mais on peut le personnaliser :

```js
// astro.config.mjs
import sitemap from "@astrojs/sitemap";

export default defineConfig({
  site: "https://www.conservatoire-exemple.fr",
  integrations: [
    sitemap({
      filter: (page) => !page.includes("/admin/"),
      changefreq: "weekly",
      priority: 0.7,
      lastmod: new Date(),
    }),
  ],
});
```

## robots.txt

Créer `public/robots.txt` :

```txt
User-agent: *
Allow: /

Sitemap: https://www.conservatoire-exemple.fr/sitemap-index.xml
```

## JSON-LD Schema

### Organisation

```astro
---
// src/components/SchemaOrg.astro
const schema = {
  "@context": "https://schema.org",
  "@type": "MusicSchool",
  "name": "Conservatoire de Musique",
  "description": "École de musique pour tous niveaux",
  "url": "https://www.conservatoire-exemple.fr",
  "logo": "https://www.conservatoire-exemple.fr/logo.png",
  "image": "https://www.conservatoire-exemple.fr/images/conservatoire.jpg",
  "address": {
    "@type": "PostalAddress",
    "streetAddress": "123 Rue de la Musique",
    "addressLocality": "Paris",
    "postalCode": "75000",
    "addressCountry": "FR"
  },
  "contactPoint": {
    "@type": "ContactPoint",
    "telephone": "+33-1-23-45-67-89",
    "contactType": "Customer Service",
    "email": "contact@conservatoire.fr"
  },
  "sameAs": [
    "https://facebook.com/conservatoire",
    "https://instagram.com/conservatoire"
  ]
};
---

<script type="application/ld+json" set:html={JSON.stringify(schema)} />
```

### Évènement

```astro
---
// Dans la page évènement
const eventSchema = {
  "@context": "https://schema.org",
  "@type": "MusicEvent",
  "name": event.title,
  "description": event.excerpt || event.description,
  "startDate": event.date,
  "location": {
    "@type": "Place",
    "name": event.location || "Conservatoire de Musique",
    "address": {
      "@type": "PostalAddress",
      "streetAddress": "123 Rue de la Musique",
      "addressLocality": "Paris",
      "postalCode": "75000",
      "addressCountry": "FR"
    }
  },
  "image": imageUrl,
  "organizer": {
    "@type": "Organization",
    "name": "Conservatoire de Musique",
    "url": "https://www.conservatoire-exemple.fr"
  }
};
---

<script type="application/ld+json" set:html={JSON.stringify(eventSchema)} />
```

## Helpers SEO

`src/lib/seo.ts` :

```ts
/**
 * Générer un titre optimisé
 */
export function generateTitle(
  pageTitle: string,
  siteName = "Conservatoire",
): string {
  return `${pageTitle} | ${siteName}`;
}

/**
 * Tronquer une description
 */
export function truncateDescription(text: string, maxLength = 160): string {
  if (text.length <= maxLength) return text;
  return text.slice(0, maxLength - 3) + "...";
}

/**
 * Générer un slug SEO-friendly
 */
export function generateSlug(title: string): string {
  return title
    .toLowerCase()
    .normalize("NFD")
    .replace(/[\u0300-\u036f]/g, "") // Supprimer les accents
    .replace(/[^a-z0-9]+/g, "-")
    .replace(/^-|-$/g, "");
}
```

## Redirections

Créer `public/_redirects` (Netlify) :

```
/ancien-url /nouvelle-url 301
/agenda/old-event /evenements/new-event 301
```

Ou pour Vercel, `vercel.json` :

```json
{
  "redirects": [
    {
      "source": "/ancien-url",
      "destination": "/nouvelle-url",
      "permanent": true
    }
  ]
}
```

## Balises hreflang (multilingue)

Si le site est multilingue :

```astro
<link rel="alternate" hreflang="fr" href="https://www.conservatoire.fr" />
<link rel="alternate" hreflang="en" href="https://www.conservatoire.fr/en" />
<link rel="alternate" hreflang="x-default" href="https://www.conservatoire.fr" />
```

## Google Search Console

1. Vérifier la propriété du site
2. Soumettre le sitemap : `https://www.conservatoire-exemple.fr/sitemap-index.xml`
3. Tester les pages avec l'outil d'inspection d'URL

## Mesurer les Core Web Vitals

Ajouter Google Analytics ou Plausible :

```astro
---
// src/components/Analytics.astro
const GA_ID = import.meta.env.PUBLIC_GA_ID;
---

{GA_ID && (
  <>
    <script async src={`https://www.googletagmanager.com/gtag/js?id=${GA_ID}`}></script>
    <script is:inline define:vars={{ GA_ID }}>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', GA_ID);
    </script>
  </>
)}
```

## Checklist SEO

- ✅ Titre unique pour chaque page (max 60 caractères)
- ✅ Meta description (max 160 caractères)
- ✅ URLs propres et descriptives
- ✅ Images avec attribut `alt`
- ✅ Balises `<h1>` uniques par page
- ✅ Sitemap.xml généré
- ✅ robots.txt configuré
- ✅ Temps de chargement < 3s
- ✅ Mobile-friendly (responsive)
- ✅ HTTPS activé
- ✅ Schema.org ajouté
- ✅ Open Graph configuré
- ✅ Liens internes cohérents
- ✅ Contenu unique et pertinent
